@startuml 登录
title 登录
hide footbox
actor user
boundary 前端页面
control 服务器
database 用户数据
user --> 前端页面: 进入登录页面
前端页面 --> 服务器: 发送get_publicKey请求,获取公钥
服务器 --> 前端页面: 返回公钥
user --> 前端页面: 输入用户ID,密码
前端页面 --> 前端页面: 验证输入合法性
user --> 前端页面: 点击登录
前端页面 --> 服务器: 发送登录请求,传入公钥加密的用户ID,密码
服务器 --> 服务器: 用私钥对公钥加密的密码\n进行解密获得用户ID,密码
服务器 --> 用户数据: 通过用户id查找数据库存储的用户信息
用户数据 --> 服务器: 返回加密密码及其他用户信息
服务器 --> 服务器: 调用checkPwd()方法验证密码是否正确
服务器 --> 服务器: 将用户信息用私钥加密存入session\n并设置失效时间根据用户类型调用不同的初始化方案
服务器 --> 前端页面: 返回成功
@enduml